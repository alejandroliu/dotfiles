#!/bin/sh
#
# This is run by the /etc/X11/xinit/session or /etc/X11/xdm/Xsession
# scripts early in the process.  Before the Desktop Environment
# is present.
#

IS_VIRTUAL=false
(xdpyinfo | grep -q XVNC-EXTENSION) && IS_VIRTUAL=true


# Make sure this fonts are included...
[ -d /usr/share/fonts/TTF ] && xset fp+ /usr/share/fonts/TTF
[ -f $HOME/.Xdefaults ] && xrdb -merge $HOME/.Xdefaults

if ! $IS_VIRTUAL ; then
  # Configure keyboard... this is more suitable for programming
  setxkbmap -rules evdev -model evdev -layout us -variant altgr-intl
  # Enable Shift-NumLock to toggle mouse control to the keyboard number pad
  $IS_VIRTUAL || setxkbmap -option keypad:pointerkeys

  # Make sure NUMLOCK is on
  case "$(uname -n)" in
    *) numlockx on ;;
  esac
fi

#(
#  sleep 500
#  xset dpms 1800 3600 7200
#  xset +dpms
#) &
